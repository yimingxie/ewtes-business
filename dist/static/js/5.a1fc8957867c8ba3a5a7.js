webpackJsonp([5,15],{"0TUx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("n5Qe"),s={data:function(){return{dialogBatch:!1,upfile:"",upFileForwardFlag:"",diaLoading:!1,batchRes:{},dialogBatchResult:!1}},mounted:function(){},methods:{openSubmitFile:function(){this.diaLoading=!1,this.upfile="",this.upFileForwardFlag="",this.dialogBatch=!0,setTimeout(function(){document.getElementById("liftInputFile").value=""},200)},deleteUpfileForward:function(){this.upfile="",this.upFileForwardFlag="",setTimeout(function(){document.getElementById("liftInputFile").value=""},200)},changeUpfile:function(){var t=document.getElementById("liftInputFile"),e=t.files[0].name,a=e.substr(e.lastIndexOf("."));".xls"==a||".xlsx"==a?(this.upfile=t.files[0],this.upFileForwardFlag="success"):(this.upfile=t.files[0],this.upFileForwardFlag="error")},submitFile:function(){var t=this;if(""===this.upFileForwardFlag||"error"==this.upFileForwardFlag)return this.$message.error("请上传Excel文件");var e=document.getElementById("liftInputFile"),a=new FormData;a.append("file",e.files[0]),this.diaLoading=!0,i.a.log.batchAddLift(a).then(function(e){t.diaLoading=!1,t.batchRes=e.data.data,t.dialogBatch=!1,t.dialogBatchResult=!0}).catch(function(e){t.diaLoading=!1})},downloadError:function(){if(0===this.batchRes.failCnt)return this.$message.info("无错误日志");var t=http.localURL+"/arctic/download/file?fileName="+this.batchRes.fileName;window.open(t)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn whiteBtn",on:{click:t.openSubmitFile}},[t._v("批量导入")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.diaLoading,expression:"diaLoading"}],staticClass:"dia-loading"},[a("div",{staticClass:"dia-loading-p"},[t._v("导入时间较长，请耐心等待...")])]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogBatch,title:"批量导入","show-close":!1,width:"690px"},on:{"update:visible":function(e){t.dialogBatch=e}}},[a("div",[a("div",{staticClass:"dia-content"},[a("div",{staticClass:"dia-clist"},[a("div",{staticClass:"dia-citem clearfix"},[a("div",{staticClass:"dia-citem-label"},[t._v("下载模板：")]),t._v(" "),a("div",{staticClass:"dia-citem-ib"},[a("a",{staticClass:"dia-download-link",attrs:{href:"https://iot.gidomino.com/elevator/template/batch-import-template-property.xlsx",target:"_blank"}},[t._v("《电梯管理批量导入-模板.excel》")])])]),t._v(" "),a("div",{staticClass:"dia-citem clearfix",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"dia-citem-label"},[t._v("上传文件：")]),t._v(" "),a("div",{staticClass:"dia-citem-ib"},[a("div",{staticClass:"dia-upload-icon"},[a("div",{staticClass:"dia-upload-icon-p1"},[t._v("点击上传文件")]),t._v(" "),a("div",{staticClass:"dia-upload-icon-p2"},[t._v("请按模板填写")]),t._v(" "),a("input",{staticClass:"dia-upfile",attrs:{id:"liftInputFile",name:"file",type:"file",value:""},on:{change:t.changeUpfile}})])])]),t._v(" "),a("div",{staticClass:"dia-citem clearfix",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"dia-citem-label"},[t._v("已上传：")]),t._v(" "),a("div",{staticClass:"dia-citem-ib"},[""!==t.upfile?a("div",{staticClass:"dia-upload-list clearfix"},[a("div",{staticClass:"dia-upload-list-icon",class:"error"==t.upFileForwardFlag?"upFileForwardError":""}),t._v(" "),a("div",{staticClass:"dia-upload-list-p"},[a("div",{staticClass:"dia-upload-list-p-name",class:"error"==t.upFileForwardFlag?"upFileForwardError":""},[t._v(t._s(this.upfile.name))]),t._v(" "),"error"==t.upFileForwardFlag?a("div",{staticClass:"dia-upload-list-p-error"},[t._v("上传失败，请检查文件有效性后重新上传")]):t._e()]),t._v(" "),a("div",{staticClass:"dia-upload-list-del",on:{click:t.deleteUpfileForward}})]):t._e()])])])]),t._v(" "),a("div",{staticClass:"dia-btn-con",staticStyle:{"margin-top":"30px"}},[a("input",{staticClass:"dia-btn dia-btn-cancel",attrs:{type:"button",value:"取消"},on:{click:function(e){t.dialogBatch=!1}}}),t._v(" "),a("input",{staticClass:"dia-btn dia-btn-submit",attrs:{type:"button",value:"确认"},on:{click:t.submitFile}})])])]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogBatchResult,title:"提示","show-close":!1,width:"690px"},on:{"update:visible":function(e){t.dialogBatchResult=e}}},[a("div",[a("div",{staticClass:"dia-content"},[a("div",{staticClass:"batch-result"},[a("div",{staticClass:"batch-result-item"},[a("div",{staticClass:"batch-result-item-title success"},[t._v("导入成功")]),t._v(" "),a("div",{staticClass:"batch-result-item-p"},[t._v("\n              成功导入"),a("span",{staticClass:"batch-result-p-info"},[t._v(t._s(t.batchRes.successCnt)+"部")]),t._v("电梯！其中，存在"),a("span",{staticClass:"batch-result-p-error"},[t._v(t._s(t.batchRes.paramIncompleteCnt)+"部")]),t._v("电梯需要补充材料；存在"),a("span",{staticClass:"batch-result-p-error"},[t._v(t._s(t.batchRes.otherBrandCnt)+"部")]),t._v("电梯品牌未匹配，暂定电梯品牌为「其他」\n            ")])]),t._v(" "),a("div",{staticClass:"batch-result-item",staticStyle:{"margin-top":"36px"}},[a("div",{staticClass:"batch-result-item-title"},[t._v("导入失败")]),t._v(" "),a("div",{staticClass:"batch-result-item-p"},[t._v("\n              导入失败"+t._s(t.batchRes.failCnt)+"部电梯，可下载错误日志，查看失败原因。\n            ")])])])]),t._v(" "),a("div",{staticClass:"diaN-btn-con clearfix",staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"diaN-btn diaN-btn-cancel",on:{click:function(e){t.dialogBatchResult=!1}}},[t._v("好的")]),t._v(" "),a("div",{staticClass:"diaN-btn diaN-btn-red",on:{click:t.downloadError}},[t._v("下载错误日志")])])])])],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(t){a("CLy7")},"data-v-a0ebc8da",null);e.default=l.exports},CLy7:function(t,e){},euTP:function(t,e){},zew1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("mvHQ");var i=a("bOdI"),s=a.n(i),o=(a("7+uW"),a("n5Qe")),l=a("EBA8"),r=a("TCsi"),c=a("s6tw"),n=(a("0TUx"),a("3pLw")),d={data:function(){var t;return t={isShow:!1,currentData:"",currentNode:"",defaultProps:{children:"children",label:"name"},queryDepartParam:"corp",getAllDepJson:[],shenfen:[{id:1,name:"完整"},{id:2,name:"简要"}],rolesJson:[],edit_roleNameArr:[],formLabelWidth:"86px",add_dialogFormVisible:!1,addAccountForm:{phone:"",name:"",departmentName:"",sex:1,idType:1,idCard:"",idCardPre:"",idCardAfter:""},edit_dialogFormVisible:!1,edit1_dialogFormVisible:!1,EditAccountForm:{phone:"",name:"",departmentName:"",sex:1,idType:1,idCard:"",corpName:""},Edit1AccountForm:{},query:"",searchKey:"",queryTypeOptions:[{label:"MAC",value:"mac"},{label:"设备ID",value:"id"}],queryType:{label:"MAC",value:"mac"},act_index:"0",totalPageSize:0,queryParam:{offset:1,limit:10,departmentName:"",search:""},getAllAccountJson:[],roleQueryParam:{limit:10,offset:1,column:"create_time",order:!0,corpId:window.localStorage.getItem("corpId"),search:""},periods:[{label:"全部",value:""}],period:"",periods1:[{label:"全部",value:""},{label:"正常",value:"1"},{label:"异常",value:"0"}],period1:"",bindRoleForm:{userId:"",roleId:""},adType:"",addAccountRules:{name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],idType:[{required:!0,message:"请选择身份证类型",trigger:"change"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}],idCardPre:[{required:!0,message:"请输入身份证号前六位",trigger:"blur"},{min:6,message:"请输入身份证号前六位",trigger:"blur"}],idCardAfter:[{required:!0,message:"请输入身份证号后六位",trigger:"blur"},{min:6,message:"请输入身份证号后六位",trigger:"blur"}]},editAccountRules:{name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}],gender:[{required:!0,message:"请选择角色",trigger:"change"}]},resetPasswordDialogVisoble:!1,confirmReset:{},deleteDialogVisoble:!1,confirmDelete:{}},s()(t,"getAllDepJson",[]),s()(t,"value1",""),s()(t,"multipleSelection",[]),s()(t,"dialogDelete",!1),s()(t,"dialogBatch",!1),s()(t,"upfile",""),s()(t,"upFileForwardFlag",""),s()(t,"diaLoading",!1),s()(t,"batchRes",{}),s()(t,"dialogBatchResult",!1),s()(t,"checkDepName",""),s()(t,"checkDepName1",""),s()(t,"depLists",[]),s()(t,"hrefWanzheng",n.a.localURL+"/template/完整模板.xlsx"),s()(t,"hrefJianyao",n.a.localURL+"/template/简要模板.xlsx"),t},components:{"radio-group":l.a,"search-input":r.a,fotter:c.a},watch:{period:function(t){this.queryParam.roleId=t,this.getAllAccountData()},period1:function(t){this.queryParam.status=t,this.getAllAccountData()}},mounted:function(){this.getAllAccountData(),this.getStaffDeps()},methods:{numberCheck:function(){this.addAccountForm.phone=this.addAccountForm.phone.replace(/[^\.\d]/g,""),this.Edit1AccountForm.phone=this.Edit1AccountForm.phone.replace(/[^\.\d]/g,"")},getStaffDeps:function(){var t=this;o.a.accountApi.getStaffDeps().then(function(e){200==e.data.code?t.depLists=e.data.data||[]:t.$message.error(e.data.message)})},depSelectChange:function(){""!==this.queryParam.departmentName&&(this.searchKey=this.queryParam.search=""),this.queryParam.offset=0,this.getAllAccountData()},handleLeftclick:function(t,e){this.checkDepName=t.name,this.addAccountForm.departmentName=t.id},loadNode1:function(t,e){this.resolve=e,this.getAllDepartmentData(t,e)},handleLeftclick1:function(t,e){this.checkDepName1=t.name,this.queryParam.departmentName=1==e.level?"":t.id,this.getAllAccountData()},openSubmitFile:function(){this.diaLoading=!1,this.upfile="",this.upFileForwardFlag="",this.dialogBatch=!0,setTimeout(function(){document.getElementById("liftInputFile").value=""},200)},deleteUpfileForward:function(){this.upfile="",this.upFileForwardFlag="",setTimeout(function(){document.getElementById("liftInputFile").value=""},200)},changeUpfile:function(){var t=document.getElementById("liftInputFile"),e=t.files[0].name,a=e.substr(e.lastIndexOf("."));".xls"==a||".xlsx"==a?(this.upfile=t.files[0],this.upFileForwardFlag="success"):(this.upfile=t.files[0],this.upFileForwardFlag="error")},submitFile:function(){var t=this;if(""===this.upFileForwardFlag||"error"==this.upFileForwardFlag)return this.$message.error("请上传Excel文件");var e=document.getElementById("liftInputFile"),a=new FormData;a.append("file",e.files[0]),this.diaLoading=!0,o.a.log.batchAddStaff(a).then(function(e){200==e.data.code?(t.diaLoading=!1,t.batchRes=e.data.data,t.dialogBatch=!1,t.dialogBatchResult=!0,t.getAllAccountData()):(t.diaLoading=!1,t.$message.error(e.data.message))}).catch(function(e){t.diaLoading=!1})},downloadError:function(){if(0===this.batchRes.failCnt)return this.$message.info("无错误日志");var t=n.a.localURL+"/ewtes/business/download/file?filename="+this.batchRes.fileName;window.open(t)},deleteStaffDialog:function(){if(0===this.multipleSelection.length)return this.$message.error("请勾选需要删除的员工。员工删除后无法复原，请谨慎操作");this.dialogDelete=!0},deleteStaff:function(t,e){var a=this;o.a.accountApi.deleteStaff(this.multipleSelection).then(function(t){200===t.data.code?(a.$message.success("删除成功！"),a.getAllAccountData(),a.dialogDelete=!1):a.$message.error(t.data.message)}).catch(function(t){a.$message.error(t.data.message)})},handleSelectionChange:function(t){var e=this;this.multipleSelection=[],t.forEach(function(t,a){e.multipleSelection.push(t.id)})},getAllAccountData:function(){var t=this;o.a.accountApi.getStaffs(this.queryParam).then(function(e){200===e.data.code&&"success"===e.data.message?(t.getAllAccountJson=e.data.data.records,t.totalPageSize=e.data.data.total):(t.getAllAccountJson=[],t.$message.error(e.data.message))}).catch(function(t){})},openResetPasswordDialog:function(t){this.resetPasswordDialogVisoble=!0,this.confirmReset=t},cancelResetPassword:function(){this.resetPasswordDialogVisoble=!1,this.confirmReset={}},resetPassword:function(t){var e=this;o.a.accountApi.resetAccount({ids:t.id.split(",")}).then(function(t){200===t.data.code?(e.getAllAccountData(),e.resetPasswordDialogVisoble=!1,"员工重置成功,管理员账号需要更高权限"==t.data.message?e.$message.error("账号操作权限不足"):e.$message.error(t.data.message)):e.$message.error("账号操作权限不足")}).catch(function(t){e.$message.error(t.data.message)})},editDialogClose:function(){},editAccount:function(t,e){var a=this;this.EditAccountForm={},this.Edit1AccountForm={},o.a.accountApi.staffDetail(e.id).then(function(t){200==t.data.code?(a.Edit1AccountForm=t.data.data,a.EditAccountForm=t.data.data,a.EditAccountForm.age=e.age?e.age+"岁":"--",""!==a.EditAccountForm.idCard&&(a.EditAccountForm.idCardPre=a.EditAccountForm.idCard.substring(0,6),a.EditAccountForm.idCardAfter=a.EditAccountForm.idCard.substring(12,18)),a.Edit1AccountForm=t.data.data,""!==a.Edit1AccountForm.idCard&&(a.Edit1AccountForm.idCardPre=a.Edit1AccountForm.idCard.substring(0,6),a.Edit1AccountForm.idCardAfter=a.Edit1AccountForm.idCard.substring(12,18),a.Edit1AccountForm.birthday&&""!==a.Edit1AccountForm.birthday&&null!==a.Edit1AccountForm.birthday&&18==a.Edit1AccountForm.idCard.length?(a.Edit1AccountForm.idType=1,a.Edit1AccountForm.idCard=a.Edit1AccountForm.idCard.substring(0,6)+a.Edit1AccountForm.birthday.substring(0,6)+a.Edit1AccountForm.idCard.substring(12,18)):a.Edit1AccountForm.idType=2)):a.$message.error(t.data.message)}),this.edit_dialogFormVisible=!0},confirmEdit:function(){var t=this;this.$refs.editForm.validate(function(e){e&&(2==t.Edit1AccountForm.idType&&(t.Edit1AccountForm.idCard=t.Edit1AccountForm.idCardPre+"******"+t.Edit1AccountForm.idCardAfter),o.a.accountApi.editAccount(t.Edit1AccountForm).then(function(e){200==e.data.code?(t.$message.success(e.data.message),t.getAllAccountData(),t.edit1_dialogFormVisible=!1,t.getStaffDeps()):"无权"==e.data.message?t.$message.error("账号操作权限不足"):t.$message.error(e.data.message)}).catch(function(t){}))})},openDeleteDialog:function(t){this.deleteDialogVisoble=!0,this.confirmDelete=t},cancelDelete:function(){this.deleteDialogVisoble=!1,this.confirmDelete={}},deleteAccount:function(t){var e=this;o.a.accountApi.deleteAccount({uid:t.id}).then(function(t){200===t.data.code?(e.$message.success("删除成功！"),e.getAllAccountData(),e.deleteDialogVisoble=!1):"无权"==t.data.message?e.$message.error("账号操作权限不足"):e.$message.error(t.data.message)}).catch(function(t){e.$message.error(t.data.message)})},changeStatus:function(t,e,a){var i=this;o.a.accountApi.enableAccount({uid:a.id,enable:t}).then(function(t){200==t.data.code?i.$message.success("修改账号状态成功！"):"无权"==t.data.message?i.$message.error("账号操作权限不足"):i.$message.error(t.data.message),i.getAllAccountData()}).catch(function(t){i.$message.error(t.data.message)})},handleSizeChange:function(t){this.queryParam.limit=t,this.getAllAccountData()},handleCurrentChange:function(t){this.queryParam.offset=t,this.getAllAccountData()},getAllRoleData:function(){var t=this;o.a.accountApi.getRoles(this.roleQueryParam).then(function(e){200===e.data.code?(t.rolesJson=e.data.data.records,t.periods=[{label:"全部",value:""}],t.rolesJson.forEach(function(e){var a={label:"",value:""};a.label=e.name,a.value=e.id,t.periods.push(a)})):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.data.message)})},addAccountDialog:function(){var t=this;this.add_dialogFormVisible=!0,this.addAccountForm.idCard="",this.addAccountForm.idCardPre="",this.addAccountForm.idCardAfter="",this.$nextTick(function(){t.$refs.addForm.resetFields()})},confirmAddAccount:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(2==t.addAccountForm.idType&&(t.addAccountForm.idCard=t.addAccountForm.idCardPre+"******"+t.addAccountForm.idCardAfter),o.a.accountApi.createStaff(t.addAccountForm).then(function(e){200===e.data.code?(t.$message.success(e.data.message),t.getAllAccountData(),t.add_dialogFormVisible=!1,t.getStaffDeps()):t.$message.error(e.data.message)}))})},searchAccount:function(){this.queryParam.offset=1,this.queryParam.search=this.searchKey,this.getAllAccountData()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-wrap",attrs:{id:"staff"}},[a("div",{staticClass:"pageTitle"},[t._v("员工管理")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"panel topSelect"},[a("div",{staticClass:"subSelect"},[a("el-select",{staticClass:"regionPicker",attrs:{clearable:"",placeholder:"全部部门"},on:{change:function(e){return t.depSelectChange()}},model:{value:t.queryParam.departmentName,callback:function(e){t.$set(t.queryParam,"departmentName",e)},expression:"queryParam.departmentName"}},t._l(t.depLists,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),a("search-input",{attrs:{placeholderValue:"搜索员工姓名/手机号"},on:{search:function(e){return t.searchAccount()},cancel:function(e){return t.searchAccount()}},model:{value:t.searchKey,callback:function(e){t.searchKey="string"==typeof e?e.trim():e},expression:"searchKey"}})],1),t._v(" "),a("div",{staticClass:"subBtns"},[a("button",{staticClass:"btn blueBtn",on:{click:t.addAccountDialog}},[t._v("添加员工")]),t._v(" "),a("button",{staticClass:"btn whiteBtn",on:{click:t.openSubmitFile}},[t._v("批量导入")]),t._v(" "),a("button",{staticClass:"btn fr deleteList",on:{click:function(e){return t.deleteStaffDialog()}}},[t._v("删除员工")])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"panel scdPanel"},[a("div",{staticStyle:{position:"relative",display:"flex"}},[t._v("\r\n         \r\n        "),a("el-table",{attrs:{data:t.getAllAccountJson},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"corpName",label:"所属单位","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{label:"部门","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(e.row.departmentName?e.row.departmentName:"--")}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"手机号","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(e.row.phone&&""!==e.row.phone?e.row.phone:"--")}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),t.editAccount(e.$index,e.row)}}},[t._v("查看详情\r\n              ")])]}}])})],1),t._v("\r\n         \r\n      ")],1),t._v(" "),a("div",{staticClass:"pagination_block"},[a("el-pagination",{attrs:{"current-page":t.queryParam.offset,"page-sizes":[10,20,30],"page-size":t.queryParam.limit,layout:"prev, pager, next, sizes, jumper",total:t.totalPageSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.queryParam,"offset",e)},"update:current-page":function(e){return t.$set(t.queryParam,"offset",e)}}})],1)])]),t._v(" "),a("el-dialog",{attrs:{width:"700px",title:"添加员工",visible:t.add_dialogFormVisible},on:{"update:visible":function(e){t.add_dialogFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addAccountForm,"label-width":t.formLabelWidth,rules:t.addAccountRules,"label-position":"top"}},[a("el-row",{attrs:{gutter:78}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名","auto-complete":"off",clearable:"",size:"small"},model:{value:t.addAccountForm.name,callback:function(e){t.$set(t.addAccountForm,"name",e)},expression:"addAccountForm.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:t.addAccountForm.sex,callback:function(e){t.$set(t.addAccountForm,"sex",e)},expression:"addAccountForm.sex"}},[a("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:78}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号","auto-complete":"off",clearable:"",size:"small",maxlength:"11"},nativeOn:{keyup:function(e){return t.numberCheck(e)}},model:{value:t.addAccountForm.phone,callback:function(e){t.$set(t.addAccountForm,"phone",e)},expression:"addAccountForm.phone"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",prop:"departmentName"}},[a("el-input",{attrs:{placeholder:"请输入所属部门","auto-complete":"off",clearable:"",size:"small"},model:{value:t.addAccountForm.departmentName,callback:function(e){t.$set(t.addAccountForm,"departmentName",e)},expression:"addAccountForm.departmentName"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:78}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证类型",prop:"idType"}},[a("el-select",{attrs:{placeholder:"请选择身份证类型",size:"small"},model:{value:t.addAccountForm.idType,callback:function(e){t.$set(t.addAccountForm,"idType",e)},expression:"addAccountForm.idType"}},t._l(t.shenfen,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),1==t.addAccountForm.idType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{attrs:{placeholder:"请输入身份证号","auto-complete":"off",clearable:"",size:"small",minlength:"18",maxlength:"18"},model:{value:t.addAccountForm.idCard,callback:function(e){t.$set(t.addAccountForm,"idCard",e)},expression:"addAccountForm.idCard"}})],1)],1):t._e(),t._v(" "),2==t.addAccountForm.idType?a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"idCardPre"}},[a("el-input",{attrs:{placeholder:"前六位","auto-complete":"off",clearable:"",size:"small",required:"",minlength:"6",maxlength:"6"},model:{value:t.addAccountForm.idCardPre,callback:function(e){t.$set(t.addAccountForm,"idCardPre",e)},expression:"addAccountForm.idCardPre"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"42px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"",prop:"idCardAfter"}},[a("el-input",{attrs:{placeholder:"后六位","auto-complete":"off",clearable:"",size:"small",required:"",minlength:"6",maxlength:"6"},model:{value:t.addAccountForm.idCardAfter,callback:function(e){t.$set(t.addAccountForm,"idCardAfter",e)},expression:"addAccountForm.idCardAfter"}})],1)],1)],1)],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(e){t.add_dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(e){return t.confirmAddAccount()}}},[t._v("确 认")])],1)],1),t._v(" "),a("el-dialog",{attrs:{width:"700px",title:"员工详情",visible:t.edit_dialogFormVisible,"custom-class":"addAccount"},on:{"update:visible":function(e){t.edit_dialogFormVisible=e},closed:t.editDialogClose}},[a("el-form",{staticClass:"detailDialog",attrs:{model:t.EditAccountForm,"label-width":t.formLabelWidth,"label-position":"top"}},[a("el-row",{attrs:{gutter:18}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("span",{staticClass:"formShowContent"},[t._v(t._s(t.EditAccountForm.name))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("span",{staticClass:"formShowContent"},[t._v(t._s(1==t.EditAccountForm.sex?"男":"女"))])])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:18}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("span",{staticClass:"formShowContent"},[t._v(t._s(t.EditAccountForm.phone&&""!==t.EditAccountForm.phone?t.EditAccountForm.phone:"--"))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属单位",prop:"corpName"}},[a("span",{staticClass:"formShowContent"},[t._v(t._s(t.EditAccountForm.corpName))])])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:18}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",prop:"departmentName"}},[a("span",{staticClass:"formShowContent"},[t._v(t._s(t.EditAccountForm.departmentName&&""!==t.EditAccountForm.departmentName?t.EditAccountForm.departmentName:"--"))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证类型",prop:"idType"}},[a("span",{staticClass:"formShowContent"},[t._v(t._s(t.EditAccountForm.birthday?"完整":"简要"))])])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:18}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[t.EditAccountForm.birthday&&18==t.EditAccountForm.idCard.length?a("span",{staticClass:"formShowContent"},[t._v(t._s(t.EditAccountForm.idCard.substring(0,6)+t.EditAccountForm.birthday.substring(0,6)+t.EditAccountForm.idCard.substring(12,18)))]):a("span",{staticClass:"formShowContent"},[t._v(t._s(t.EditAccountForm.idCard))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("span",{staticClass:"formShowContent"},[t._v("\r\n              "+t._s(t.EditAccountForm.birthday&&""!==t.EditAccountForm.birthday&&null!==t.EditAccountForm.birthday?t.EditAccountForm.birthday.substring(0,4)+"-"+t.EditAccountForm.birthday.substring(4,6)+"-"+t.EditAccountForm.birthday.substring(6,8):"--")+"\r\n                  "+t._s(t.EditAccountForm.age)+"\r\n            ")])])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(e){t.edit_dialogFormVisible=!1,t.edit1_dialogFormVisible=!0}}},[t._v("编 辑")]),t._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(e){t.edit_dialogFormVisible=!1}}},[t._v("关 闭")])],1)],1),t._v(" "),a("el-dialog",{attrs:{width:"700px",title:"编辑员工",visible:t.edit1_dialogFormVisible},on:{"update:visible":function(e){t.edit1_dialogFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.Edit1AccountForm,"label-width":t.formLabelWidth,rules:t.addAccountRules,"label-position":"top"}},[a("el-row",{attrs:{gutter:78}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名","auto-complete":"off",clearable:"",size:"small"},model:{value:t.Edit1AccountForm.name,callback:function(e){t.$set(t.Edit1AccountForm,"name",e)},expression:"Edit1AccountForm.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:t.Edit1AccountForm.sex,callback:function(e){t.$set(t.Edit1AccountForm,"sex",e)},expression:"Edit1AccountForm.sex"}},[a("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:78}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号","auto-complete":"off",clearable:"",size:"small",maxlength:"11"},nativeOn:{keyup:function(e){return t.numberCheck(e)}},model:{value:t.Edit1AccountForm.phone,callback:function(e){t.$set(t.Edit1AccountForm,"phone",e)},expression:"Edit1AccountForm.phone"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",prop:"departmentName"}},[a("el-input",{attrs:{placeholder:"请输入所属部门","auto-complete":"off",clearable:"",size:"small"},model:{value:t.Edit1AccountForm.departmentName,callback:function(e){t.$set(t.Edit1AccountForm,"departmentName",e)},expression:"Edit1AccountForm.departmentName"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:78}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证类型",prop:"idType"}},[a("el-select",{attrs:{placeholder:"请选择身份证类型",size:"small"},model:{value:t.Edit1AccountForm.idType,callback:function(e){t.$set(t.Edit1AccountForm,"idType",e)},expression:"Edit1AccountForm.idType"}},t._l(t.shenfen,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),1==t.Edit1AccountForm.idType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{attrs:{placeholder:"请输入身份证号","auto-complete":"off",clearable:"",size:"small",minlength:"18",maxlength:"18"},model:{value:t.Edit1AccountForm.idCard,callback:function(e){t.$set(t.Edit1AccountForm,"idCard",e)},expression:"Edit1AccountForm.idCard"}})],1)],1):t._e(),t._v(" "),2==t.Edit1AccountForm.idType?a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"idCardPre"}},[a("el-input",{attrs:{placeholder:"前六位","auto-complete":"off",clearable:"",size:"small",required:"",minlength:"6",maxlength:"6"},model:{value:t.Edit1AccountForm.idCardPre,callback:function(e){t.$set(t.Edit1AccountForm,"idCardPre",e)},expression:"Edit1AccountForm.idCardPre"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"42px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"",prop:"idCardAfter"}},[a("el-input",{attrs:{placeholder:"后六位","auto-complete":"off",clearable:"",size:"small",required:"",minlength:"6",maxlength:"6"},model:{value:t.Edit1AccountForm.idCardAfter,callback:function(e){t.$set(t.Edit1AccountForm,"idCardAfter",e)},expression:"Edit1AccountForm.idCardAfter"}})],1)],1)],1)],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(e){t.edit1_dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(e){return t.confirmEdit()}}},[t._v("确 认")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"noneTitle","show-close":!1,visible:t.resetPasswordDialogVisoble},on:{"update:visible":function(e){t.resetPasswordDialogVisoble=e}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),t._v(" "),a("div",{staticClass:"dia-con-p"},[a("div",{staticClass:"confirDialogText1"},[t._v("是否确认重置登录密码 ?")]),t._v(" "),a("p",{staticStyle:{"margin-bottom":"20px"}},[t._v("（重置后，登录密码为666666）")])])])]),t._v(" "),a("div",{staticClass:"dialog-footer tac",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"dialogCancel",on:{click:function(e){return t.cancelResetPassword()}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(e){return t.resetPassword(t.confirmReset)}}},[t._v("确 认")])],1)]),t._v(" "),a("el-dialog",{attrs:{"custom-class":"noneTitle","show-close":!1,visible:t.deleteDialogVisoble},on:{"update:visible":function(e){t.deleteDialogVisoble=e}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),t._v(" "),a("div",{staticClass:"dia-con-p",staticStyle:{"margin-bottom":"30px"}},[a("div",{staticClass:"confirDialogText1"},[t._v("是否删除账号，删除后，无法复原")])])]),t._v(" "),a("div",{staticClass:"diaN-btn-con clearfix"},[a("div",{staticClass:"diaN-btn diaN-btn-cancel",on:{click:function(e){return t.cancelDelete()}}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"diaN-btn diaN-btn-red",on:{click:function(e){return t.deleteAccount(t.confirmDelete)}}},[t._v("确认")])])])]),t._v(" "),a("el-dialog",{attrs:{width:"500px","show-close":!1,title:"删除员工",visible:t.dialogDelete},on:{"update:visible":function(e){t.dialogDelete=e}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),t._v(" "),a("div",{staticClass:"dia-con-p"},[a("div",{staticClass:"confirDialogText1"},[t._v("是否确认删除所选员工")]),t._v(" "),a("div",{staticClass:"confirDialogText2"},[t._v("删除后不可复原，请谨慎操作")])])])]),t._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(e){t.dialogDelete=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:t.deleteStaff}},[t._v("完 成")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.diaLoading,expression:"diaLoading"}],staticClass:"dia-loading"},[a("div",{staticClass:"dia-loading-p"},[t._v("导入时间较长，请耐心等待...")])]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogBatch,title:"批量导入","show-close":!1,width:"500px"},on:{"update:visible":function(e){t.dialogBatch=e}}},[a("div",[a("div",{staticClass:"dia-content"},[a("div",{staticClass:"dia-clist"},[a("div",{staticClass:"dia-citem clearfix"},[a("div",{staticClass:"dia-citem-label"},[t._v("下载模板")]),t._v(" "),a("div",{staticClass:"dia-citem-ib"},[a("a",{staticClass:"dia-download-link",attrs:{href:t.hrefWanzheng,target:"_blank"}},[t._v("《完整模板.excel》")]),t._v(" "),a("span",{staticStyle:{color:"#D8D8D8",margin:"0 10px"}},[t._v("|")]),t._v(" "),a("a",{staticClass:"dia-download-link",attrs:{href:t.hrefJianyao,target:"_blank"}},[t._v("《简要模板.excel》")])])]),t._v(" "),a("div",{staticClass:"dia-citem clearfix",staticStyle:{"margin-top":"24px"}},[a("div",{staticClass:"dia-citem-label"},[t._v("上传文件")]),t._v(" "),a("div",{staticClass:"dia-citem-ib"},[a("div",{staticClass:"dia-upload-icon"},[a("div",{staticClass:"dia-upload-icon-p1"},[t._v("上传")]),t._v(" "),a("input",{staticClass:"dia-upfile",attrs:{id:"liftInputFile",name:"file",type:"file",value:""},on:{change:t.changeUpfile}})])])]),t._v(" "),a("div",{staticClass:"dia-citem clearfix",staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"dia-citem-label"},[t._v("已上传")]),t._v(" "),a("div",{staticClass:"dia-citem-ib"},[""!==t.upfile?a("div",{staticClass:"dia-upload-list clearfix"},[a("div",{staticClass:"dia-upload-list-icon",class:"error"==t.upFileForwardFlag?"upFileForwardError":""}),t._v(" "),a("div",{staticClass:"dia-upload-list-p"},[a("div",{staticClass:"dia-upload-list-p-name",class:"error"==t.upFileForwardFlag?"upFileForwardError":""},[t._v(t._s(this.upfile.name))]),t._v(" "),"error"==t.upFileForwardFlag?a("div",{staticClass:"dia-upload-list-p-error"},[t._v("上传失败，请检查文件有效性后重新上传")]):t._e()]),t._v(" "),a("div",{staticClass:"dia-upload-list-del",on:{click:t.deleteUpfileForward}})]):t._e()])])])])]),t._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(e){t.dialogBatch=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:t.submitFile}},[t._v("完 成")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogBatchResult,title:"导入结果","show-close":!1,width:"500px"},on:{"update:visible":function(e){t.dialogBatchResult=e}}},[a("div",[a("div",{staticClass:"dia-content"},[a("div",{staticClass:"batch-result"},[a("div",{staticClass:"batch-result-item"},[a("div",{staticClass:"batch-result-item-title success"},[t._v("导入成功")]),t._v(" "),a("div",{staticClass:"batch-result-item-p"},[a("span",{staticClass:"batch-result-p-info"},[t._v(t._s(t.batchRes.successCnt)+"条")])])]),t._v(" "),a("div",{staticClass:"batch-result-item",staticStyle:{"margin-top":"36px"}},[a("div",{staticClass:"batch-result-item-title"},[t._v("导入失败（可下载错误日志，查看失败原因）")]),t._v(" "),a("div",{staticClass:"batch-result-item-p"},[a("span",{staticClass:"batch-result-p-error"},[t._v(t._s(t.batchRes.failCnt)+"条")])])])]),t._v(" "),a("div",{staticClass:"dia-download-link",staticStyle:{"margin-top":"28px","border-top":"1px solid #e9e9e9",padding:"22px 0 0"},on:{click:t.downloadError}},[t._v("下载错误日志")])])]),t._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(e){t.dialogBatchResult=!1}}},[t._v("完 成")])],1)]),t._v(" "),a("fotter")],1)},staticRenderFns:[]};var m=a("VU/8")(d,u,!1,function(t){a("euTP")},null,null);e.default=m.exports}});