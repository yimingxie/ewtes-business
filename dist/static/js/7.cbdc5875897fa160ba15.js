webpackJsonp([7],{"0sex":function(t,e){},"N+Yc":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("n5Qe"),a=(i("EBA8"),i("TCsi")),l=i("s6tw"),c=i("QOnF"),n=i("XAb4"),o={data:function(){return{selectCityFa:[],useDepartmentOptions:[],useDepartmentValue:"",digitalList:[],test:"",liftselevCodeOptions:[],checkedLifts:[],checkedAll:!1,epListParams:{title:"",epedId:"",areaCode:"",useDepartment:"",limit:10,offset:1},facility:"",partPoint:"",currentPage:1,totalPage:1,pageSize:10,dialogDeleteCheckPoint:!1}},created:function(){this.facility=localStorage.getItem("facility")?parseInt(localStorage.getItem("facility")):100},mounted:function(){this.getDigitalList(),this.getUseDepartmentOptions()},methods:{getDigitalList:function(){var t=this,e=this;s.a.digital.getEpidemicList(this.epListParams).then(function(i){t.digitalList=i.data.data.records,t.liftselevCodeOptions=[],t.digitalList.forEach(function(e){t.liftselevCodeOptions.push(e.epedId)}),setTimeout(function(){t.digitalList.forEach(function(t,i){var s=document.getElementById(t.epedId);if(s.children.length>0){var a=s.children[0];t.epedNameShow=a.clientWidth<a.scrollWidth,window.addEventListener("resize",function(){t.epedNameShow=a.clientWidth<a.scrollWidth,e.$forceUpdate()})}}),e.$forceUpdate()},300),t.currentPage=i.data.data.current,t.totalPage=i.data.data.total})},getUseDepartmentOptions:function(){var t=this;s.a.digital.getUseDepartment().then(function(e){t.useDepartmentOptions=[],e.data.data.forEach(function(e){t.useDepartmentOptions.push({label:e.name,value:e.id})})})},useDepartmentChange:function(){this.epListParams.offset=1,this.getDigitalList()},selectCity:function(t,e){0===t.length?this.epListParams={title:"",epedId:"",areaCode:"",useDepartment:"",limit:10,offset:1}:(this.epListParams.offset=1,this.epListParams.areaCode=t[t.length-1]||""),this.getDigitalList()},checkedLiftsChange:function(t){var e=this.digitalList.length;this.checkedAll=t.length===e},checkedAllChange:function(t){this.checkedLifts=t?this.liftselevCodeOptions:[]},currentPageChange:function(t){this.epListParams.offset=t,this.getDigitalList()},pageSizeChange:function(t){this.epListParams.limit=t,this.getDigitalList()},searchTask:function(t){this.epListParams.title=t,this.epListParams.offset=1,this.getDigitalList()},clearTask:function(){this.epListParams.title="",this.epListParams.offset=1,this.getDigitalList()},switchChange:function(t,e){},openDialogDeleteCheckPoint:function(){if(0===this.checkedLifts.length)return this.$message.error("请选择要删除的防疫点");this.dialogDeleteCheckPoint=!0},deleteCheckPoint:function(){var t=this,e=this;s.a.digital.deleteEpidemic(this.checkedLifts.join(",")).then(function(i){"200"==i.data.code?(t.dialogDeleteCheckPoint=!1,e.$message.success("删除成功"),t.checkedLifts=[],t.getDigitalList()):e.$message.error(i.data.message)})},goDetail:function(t){this.$router.push({path:"/digital-detail",query:{epedId:t}})},goDetection:function(t){this.$router.push({path:"/detection-panel",query:{epedId:t}})},goDiagn:function(t){this.$router.push({path:"/diagnosis-list",query:{epedId:t}})},goAdd:function(){this.$router.push("/digital-add-result")}},filters:{judgeYear:function(t){var e=t;if(""===t)return"--";"number"==typeof t&&(e=n.a.dateFormat(t));var i=n.a.dateFormat(Date.now()).substring(0,4);return e.substring(0,4)==i?e.substring(5,16):e.substring(2,16)}},components:{"city-choose2":c.a,"search-input":a.a,"footer-temp":l.a}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xym",attrs:{id:"DigitalList"}},[t._m(0),t._v(" "),i("div",{staticClass:"x-container"},[i("div",{staticClass:"x-list"},[i("div",{staticClass:"xlist-choose clearfix"},[i("div",{staticClass:"xlist-choose-content clearfix"},[i("div",{staticClass:"xcc-box xcc-box-city"},[i("city-choose2",{attrs:{selectCity:t.selectCityFa},on:{childVal:t.selectCity}})],1),t._v(" "),i("div",{staticClass:"xcc-splitLine"}),t._v(" "),i("div",{staticClass:"xcc-box",staticStyle:{width:"110px"}},[i("el-select",{staticClass:"digital-list-select",attrs:{clearable:"",placeholder:"全部单位",size:"small"},on:{change:t.useDepartmentChange},model:{value:t.epListParams.useDepartment,callback:function(e){t.$set(t.epListParams,"useDepartment",e)},expression:"epListParams.useDepartment"}},t._l(t.useDepartmentOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),i("div",{staticClass:"xlist-choose-si"},[i("search-input",{ref:"searchInputRef",attrs:{placeholderValue:"搜索防疫点名称/内部编号/详细地址"},on:{search:t.searchTask,cancel:t.clearTask}})],1)]),t._v(" "),i("div",{staticClass:"xlist-operator"},[i("div",{staticClass:"xlist-operator-content clearfix"},[i("div",{staticClass:"xop-btn-submit",on:{click:t.goAdd}},[t._v("添加防疫点")]),t._v(" "),i("div",{staticClass:"xop-btn-delete",on:{click:t.openDialogDeleteCheckPoint}},[t._v("删除防疫点")])])]),t._v(" "),i("div",{staticClass:"x-list-block"}),t._v(" "),i("div",{staticClass:"ll-table"},[i("div",{staticClass:"llt-thead"},[i("div",{staticClass:"llt-tr clearfix"},[i("div",{staticClass:"llt-th"},[i("el-checkbox",{on:{change:t.checkedAllChange},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v(t._s(t.test))])],1),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("防疫点名称")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("内部编号")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("区域")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("详细地址")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("所属单位")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("累计检测人次")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("累计异常人数")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("监测数")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("上次告警")]),t._v(" "),i("div",{staticClass:"llt-th"},[t._v("操作")])])]),t._v(" "),i("div",{staticClass:"llt-tbody"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.digitalList.length,expression:"digitalList.length == 0"}],staticClass:"list-no-data"},[t._v("暂无数据")]),t._v(" "),t._l(t.digitalList,function(e,s){return i("div",{key:s,staticClass:"llt-tr clearfix",class:e.status?"":"offline"},[i("div",{staticClass:"llt-tr-container clearfix"},[i("div",{staticClass:"llt-td"},[i("el-checkbox-group",{on:{change:t.checkedLiftsChange},model:{value:t.checkedLifts,callback:function(e){t.checkedLifts=e},expression:"checkedLifts"}},[i("el-checkbox",{key:s,attrs:{label:e.epedId}},[t._v(t._s(t.test))])],1)],1),t._v(" "),i("div",{staticClass:"llt-td",staticStyle:{position:"static",overflow:"visible","text-overflow":"clip","white-space":"normal"},attrs:{id:e.epedId}},[i("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.epedName))]),t._v(" "),e.epedNameShow?i("div",{staticClass:"llt-td-fullstr llt-td-fullstr-epedName"},[t._v(t._s(e.epedName))]):t._e()]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(e.inNum))]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(e.localArea))]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(e.address))]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(e.useDepartment?e.useDepartment:"--"))]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(e.checkCount))]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(e.abnormalCount))]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(e.monitorNum))]),t._v(" "),i("div",{staticClass:"llt-td"},[t._v(t._s(t._f("judgeYear")(e.lastTime)))]),t._v(" "),i("div",{staticClass:"llt-td"},[i("span",{staticClass:"llt-td-a",on:{click:function(i){return t.goDetail(e.epedId)}}},[t._v("档案")]),t._v(" "),i("em",{staticClass:"llt-td-line"},[t._v("|")]),t._v(" "),i("span",{staticClass:"llt-td-a",on:{click:function(i){return t.goDiagn(e.epedId)}}},[t._v("设置监测")]),t._v(" "),i("em",{staticClass:"llt-td-line"},[t._v("|")]),t._v(" "),i("span",{staticClass:"llt-td-a",on:{click:function(i){return t.goDetection(e.epedId)}}},[t._v("诊断")])])])])})],2),t._v(" "),i("div",{staticClass:"list-page"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30],"page-size":t.pageSize,layout:"prev, pager, next, sizes, jumper",total:t.totalPage},on:{"size-change":t.pageSizeChange,"current-change":t.currentPageChange}})],1)])])]),t._v(" "),i("footer-temp"),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogDeleteCheckPoint,title:"删除防疫点","show-close":!1,width:"700px"},on:{"update:visible":function(e){t.dialogDeleteCheckPoint=e}}},[i("div",{staticClass:"dia-content"},[i("div",{staticClass:"dia-con-p"},[i("h4",[t._v("是否确认删除")])]),t._v(" "),i("div",{staticClass:"dia-btn-con",staticStyle:{"text-align":"right"}},[i("div",{staticClass:"dia-btn dia-btn-cancel",on:{click:function(e){t.dialogDeleteCheckPoint=!1}}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"dia-btn dia-btn-submit",on:{click:t.deleteCheckPoint}},[t._v("确认")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bread-nav"},[e("em",[this._v("数字防疫点")])])}]};var r=i("VU/8")(o,d,!1,function(t){i("tB0/"),i("0sex")},"data-v-725b8c86",null);e.default=r.exports},"tB0/":function(t,e){}});