webpackJsonp([14],{"7zg7":function(e,t){},ExKv:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("n5Qe"),s=(i("EBA8"),i("TCsi")),d=i("s6tw"),l=i("QOnF"),r=i("XAb4"),n={data:function(){return{parentCode:"",epedName:"",inNum:"",localArea:"",address:"",parentName:"",parentNameShow:"",observeList:[],test:"",liftselevCodeOptions:[],checkedLifts:[],checkedAll:!1,observeParams:{observedName:"",epedId:"",limit:10,offset:1},currentPage:1,totalPage:1,pageSize:10,dialogAddObserveTitle:"添加检测任务",dialogAddObserve:!1,ruleFormAddObserve:{observedName:"",pointId:"",epedId:"",pointData:""},rulesAddObserve:{observedName:[{required:!0,message:"必填",trigger:"blur"}],pointId:[{required:!0,message:"必填",trigger:"change"}],pointData:[{required:!0,message:"必填",trigger:"change"}]},observePointOptions:[],currentObId:"",pointDataRadio:[],dialogDeleteObserve:!1}},created:function(){this.parentCode=this.$route.query.epedId,this.observeParams.epedId=this.$route.query.epedId},mounted:function(){var e=this;this.getObList(),this.getDigitalDetail(),this.getObservePointOptions();var t=this.$refs.parentRef;setTimeout(function(){e.parentNameShow=t.clientWidth<t.scrollWidth},300),window.addEventListener("resize",function(){e.parentNameShow=t.clientWidth<t.scrollWidth})},methods:{getObList:function(){var e=this;a.a.digital.getObserveList(this.observeParams).then(function(t){e.observeList=t.data.data.records,e.liftselevCodeOptions=[],e.observeList.forEach(function(t){e.liftselevCodeOptions.push(t.observedId)}),e.currentPage=t.data.data.current,e.totalPage=t.data.data.total})},getDigitalDetail:function(){var e=this;a.a.digital.getDigitalDetail(this.parentCode).then(function(t){var i=t.data.data;e.epedName=i.epedName,e.inNum=i.inNum,e.localArea=i.localArea,e.address=i.address,e.parentName=i.parentName})},getObservePointOptions:function(){var e=this;a.a.digital.getEpidemicMonitorList(this.parentCode).then(function(t){var i=t.data.data;e.observePointOptions=[],i.forEach(function(t){e.observePointOptions.push({value:t.pointId,label:t.pointName,pointData:t.pointData})})})},checkedLiftsChange:function(e){var t=this.observeList.length;this.checkedAll=e.length===t},checkedAllChange:function(e){this.checkedLifts=e?this.liftselevCodeOptions:[]},currentPageChange:function(e){this.observeParams.offset=e,this.getObList()},pageSizeChange:function(e){this.observeParams.limit=e,this.getObList()},searchTask:function(e){this.observeParams.observedName=e,this.observeParams.offset=1,this.getObList()},clearTask:function(){this.observeParams.observedName="",this.observeParams.offset=1,this.getObList()},openDialogAddObserve:function(){this.getObservePointOptions(),this.dialogAddObserveTitle="添加检测任务",this.ruleFormAddObserve={observedName:"",pointId:"",epedId:this.parentCode,pointData:""},this.dialogAddObserve=!0},pointIdChange:function(){var e=this,t=this.observePointOptions.filter(function(t){return t.value==e.ruleFormAddObserve.pointId});(this.pointDataRadio=[],t.length>0)&&t[0].pointData.split("|").forEach(function(t){e.pointDataRadio.push({value:parseInt(t),label:r.a.returnPointDataCN(t)})})},submitAddObserve:function(){var e=this;this.$refs.addObserveRef.validate(function(t){if(t){var i={observedName:e.ruleFormAddObserve.observedName,pointId:e.ruleFormAddObserve.pointId,epedId:e.parentCode,pointData:e.ruleFormAddObserve.pointData};a.a.digital.addObserve(i).then(function(t){200==t.data.code?(e.$message.success("添加成功"),e.dialogAddObserve=!1,e.getObList()):e.$message.error(t.data.message)})}})},openDialogEditObserve:function(e){var t=this;a.a.digital.getObserveDetail(e).then(function(e){var i=e.data.data;t.dialogAddObserve=!0,t.currentObId=i.observedId,t.dialogAddObserveTitle="编辑检测任务",t.ruleFormAddObserve={observedName:i.observedName,pointId:i.pointId,epedId:t.parentCode,pointData:i.pointData},t.pointIdChange()})},submitEditObserve:function(){var e=this;this.$refs.addObserveRef.validate(function(t){if(t){var i={observedId:e.currentObId,observedName:e.ruleFormAddObserve.observedName,pointId:e.ruleFormAddObserve.pointId,pointData:e.ruleFormAddObserve.pointData};a.a.digital.editObserve(i).then(function(t){200==t.data.code?(e.$message.success("编辑成功"),e.dialogAddObserve=!1,e.getObList()):e.$message.error(t.data.message)})}})},closeDialogObserve:function(){this.$refs.addObserveRef.clearValidate(),this.dialogAddObserve=!1,this.currentObId=""},openDialogDeleteObserve:function(){if(0===this.checkedLifts.length)return this.$message.error("请选择要删除的检测任务");this.dialogDeleteObserve=!0},deleteObserve:function(){var e=this,t=this.checkedLifts.join(",");a.a.digital.deleteObserve(t).then(function(t){200==t.data.code?e.$message.success("删除成功"):e.$message.error(t.data.message),e.dialogDeleteObserve=!1,e.checkedLifts=[],e.checkedAll=!1,e.getObList()})}},filters:{splitEpedName:function(e){return"string"==typeof e&&e.length>=10?e.substring(0,8)+"...":e}},components:{"city-choose2":l.a,"search-input":s.a,"footer-temp":d.a}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"xym",attrs:{id:"ObserveList"}},[i("div",{staticClass:"bread-nav"},[i("span",{on:{click:function(t){return e.$router.push("/digital-list")}}},[e._v("数字防疫点")]),e._v(" "),i("span",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("/ 档案")]),e._v(" "),i("em",[e._v("/ 检测任务管理")])]),e._v(" "),i("div",{staticClass:"x-container"},[i("div",{staticClass:"x-digital-detail clearfix"},[i("div",{staticClass:"xddetail-name"},[i("div",{staticClass:"xddetail-name-p"},[e._v(e._s(e._f("splitEpedName")(e.epedName)))]),e._v(" "),e.epedName.length>=10?i("div",{staticClass:"xddetail-name-p-full"},[e._v(e._s(e.epedName))]):e._e()]),e._v(" "),i("div",{staticClass:"xddetail-list clearfix"},[i("div",{staticClass:"xddetail-list-item-first clearfix"},[i("div",{staticClass:"xddetail-list-item clearfix",staticStyle:{width:"100%"}},[i("div",{staticClass:"xddetail-list-item-title"},[e._v("内部编号")]),e._v(" "),i("div",{staticClass:"xddetail-list-item-p"},[e._v(e._s(e.inNum))])])]),e._v(" "),i("div",{staticClass:"xddetail-list-item-second clearfix"},[i("div",{staticClass:"xddetail-list-item clearfix"},[i("div",{staticClass:"xddetail-list-item-title"},[e._v("区域")]),e._v(" "),i("div",{staticClass:"xddetail-list-item-p"},[e._v(e._s(e.localArea))])]),e._v(" "),i("div",{staticClass:"xddetail-list-item clearfix"},[i("div",{staticClass:"xddetail-list-item-title"},[e._v("详细地址")]),e._v(" "),i("div",{staticClass:"xddetail-list-item-p",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.address))])])]),e._v(" "),i("div",{staticClass:"xddetail-list-item-third clearfix"},[i("div",{staticClass:"xddetail-list-item clearfix"},[i("div",{staticClass:"xddetail-list-item-title"},[e._v("所属上级")]),e._v(" "),i("div",{ref:"parentRef",staticClass:"xddetail-list-item-p xddetail-list-item-p-parent",staticStyle:{"padding-right":"0"}},[e._v("\n              "+e._s(e.parentName?e.parentName:"--")+"\n              "),e.parentNameShow?i("div",{staticClass:"xddetail-name-p-full"},[e._v(e._s(e.parentName))]):e._e()])])])])]),e._v(" "),i("div",{staticClass:"xdi-detail clearfix"},[i("div",{staticClass:"xdi-detail-left"},[i("div",{staticClass:"xdi-detail-name"},[e._v(e._s(e._f("splitEpedName")(e.epedName)))]),e._v(" "),e.epedName.length>=10?i("div",{staticClass:"xdi-detail-name-full"},[e._v(e._s(e.epedName))]):e._e()]),e._v(" "),i("div",{staticClass:"xdi-detail-right"},[i("div",{staticClass:"xdi-detail-item-con"},[i("div",{staticClass:"xdi-detail-item clearfix"},[i("div",{staticClass:"xdi-detail-item-title"},[e._v("内部编号")]),e._v(" "),i("div",{staticClass:"xdi-detail-item-p"},[e._v(e._s(e.inNum))])]),e._v(" "),i("div",{staticClass:"xdi-detail-item clearfix"},[i("div",{staticClass:"xdi-detail-item-title"},[e._v("区域")]),e._v(" "),i("div",{staticClass:"xdi-detail-item-p"},[e._v(e._s(e.localArea))]),e._v(" "),i("div",{staticClass:"xdi-detail-item-title"},[e._v("详细地址")]),e._v(" "),i("div",{staticClass:"xdi-detail-item-p xdi-detail-item-p-address"},[e._v(e._s(e.address))])]),e._v(" "),i("div",{staticClass:"xdi-detail-item clearfix"},[i("div",{staticClass:"xdi-detail-item-title"},[e._v("所属上级")]),e._v(" "),i("div",{ref:"parentRef",staticClass:"xdi-detail-item-p xdi-detail-item-p-parent",staticStyle:{"padding-right":"10px"}},[e._v("\n              "+e._s(e.parentName?e.parentName:"--")+"\n              "),e.parentNameShow?i("div",{staticClass:"xddetail-name-p-full"},[e._v(e._s(e.parentName))]):e._e()])])])])]),e._v(" "),i("div",{staticClass:"x-list"},[i("div",{staticClass:"xlist-choose clearfix"},[i("div",{staticClass:"xlist-choose-si"},[i("search-input",{ref:"searchInputRef",attrs:{placeholderValue:"搜索检测任务名称"},on:{search:e.searchTask,cancel:e.clearTask}})],1)]),e._v(" "),i("div",{staticClass:"xlist-operator"},[i("div",{staticClass:"xlist-operator-content clearfix"},[i("div",{staticClass:"xop-btn-submit",on:{click:e.openDialogAddObserve}},[e._v("添加检测任务")]),e._v(" "),i("div",{staticClass:"xop-btn-delete",on:{click:e.openDialogDeleteObserve}},[e._v("删除任务")])])]),e._v(" "),i("div",{staticClass:"x-list-block"}),e._v(" "),i("div",{staticClass:"ll-table"},[i("div",{staticClass:"llt-thead"},[i("div",{staticClass:"llt-tr clearfix"},[i("div",{staticClass:"llt-th"},[i("el-checkbox",{on:{change:e.checkedAllChange},model:{value:e.checkedAll,callback:function(t){e.checkedAll=t},expression:"checkedAll"}},[e._v(e._s(e.test))])],1),e._v(" "),i("div",{staticClass:"llt-th"},[e._v("检测任务名称")]),e._v(" "),i("div",{staticClass:"llt-th"},[e._v("检测区域")]),e._v(" "),i("div",{staticClass:"llt-th"},[e._v("检测数据类型")])])]),e._v(" "),i("div",{staticClass:"llt-tbody"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.observeList.length,expression:"observeList.length == 0"}],staticClass:"list-no-data"},[e._v("暂无数据")]),e._v(" "),e._l(e.observeList,function(t,a){return i("div",{key:a,staticClass:"llt-tr clearfix"},[i("div",{staticClass:"llt-tr-container clearfix"},[i("div",{staticClass:"llt-td"},[i("el-checkbox-group",{on:{change:e.checkedLiftsChange},model:{value:e.checkedLifts,callback:function(t){e.checkedLifts=t},expression:"checkedLifts"}},[i("el-checkbox",{key:a,attrs:{label:t.observedId}},[e._v(e._s(e.test))])],1)],1),e._v(" "),i("div",{staticClass:"llt-td"},[e._v(e._s(t.observedName))]),e._v(" "),i("div",{staticClass:"llt-td"},[e._v(e._s(t.pointName))]),e._v(" "),i("div",{staticClass:"llt-td"},[e._v(e._s(e._f("returnPointDataCN")(t.pointData)))])])])})],2),e._v(" "),i("div",{staticClass:"list-page"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"prev, pager, next, sizes, jumper",total:e.totalPage},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])])]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogAddObserve,title:e.dialogAddObserveTitle,"show-close":!1,width:"700px"},on:{"update:visible":function(t){e.dialogAddObserve=t},close:e.closeDialogObserve}},[i("div",{staticClass:"dia-content"},[i("el-form",{ref:"addObserveRef",staticClass:"diaForm",attrs:{model:e.ruleFormAddObserve,rules:e.rulesAddObserve}},[i("div",{staticClass:"dia-clist"},[i("div",{staticClass:"dia-citem"},[i("el-form-item",{attrs:{prop:"observedName"}},[i("div",{staticClass:"dia-citem-label"},[i("span",{staticClass:"dia-citem-label-must"},[e._v("*")]),e._v("检测任务名称：")]),e._v(" "),i("div",{staticClass:"dia-citem-ib"},[i("el-input",{attrs:{maxlength:"50",size:"small",placeholder:"请输入检测任务名称"},model:{value:e.ruleFormAddObserve.observedName,callback:function(t){e.$set(e.ruleFormAddObserve,"observedName",t)},expression:"ruleFormAddObserve.observedName"}})],1)])],1),e._v(" "),i("div",{staticClass:"dia-citem"},[i("el-form-item",{attrs:{prop:"pointId"}},[i("div",{staticClass:"dia-citem-label"},[i("span",{staticClass:"dia-citem-label-must"},[e._v("*")]),e._v("检测区域：")]),e._v(" "),i("div",{staticClass:"dia-citem-ib"},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择检测区域",size:"small"},on:{change:e.pointIdChange},model:{value:e.ruleFormAddObserve.pointId,callback:function(t){e.$set(e.ruleFormAddObserve,"pointId",t)},expression:"ruleFormAddObserve.pointId"}},e._l(e.observePointOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])],1),e._v(" "),i("div",{staticClass:"dia-citem"},[i("el-form-item",{attrs:{prop:"pointData"}},[i("div",{staticClass:"dia-citem-label"},[i("span",{staticClass:"dia-citem-label-must"},[e._v("*")]),e._v("检测数据：")]),e._v(" "),i("div",{staticClass:"dia-citem-ib"},[e.ruleFormAddObserve.pointId?i("div",[i("el-radio-group",{model:{value:e.ruleFormAddObserve.pointData,callback:function(t){e.$set(e.ruleFormAddObserve,"pointData",t)},expression:"ruleFormAddObserve.pointData"}},e._l(e.pointDataRadio,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e()])])],1)])]),e._v(" "),"添加检测任务"==e.dialogAddObserveTitle?i("div",{staticClass:"dia-btn-con",staticStyle:{"text-align":"right"}},[i("div",{staticClass:"dia-btn dia-btn-cancel",on:{click:e.closeDialogObserve}},[e._v("取消")]),e._v(" "),i("div",{staticClass:"dia-btn dia-btn-submit",on:{click:e.submitAddObserve}},[e._v("完成")])]):i("div",{staticClass:"dia-btn-con",staticStyle:{"text-align":"right"}},[i("div",{staticClass:"dia-btn dia-btn-cancel",on:{click:e.closeDialogObserve}},[e._v("取消")]),e._v(" "),i("div",{staticClass:"dia-btn dia-btn-submit",on:{click:e.submitEditObserve}},[e._v("完成")])])],1)]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogDeleteObserve,title:"删除检测任务","show-close":!1,width:"700px"},on:{"update:visible":function(t){e.dialogDeleteObserve=t}}},[i("div",{staticClass:"dia-content"},[i("div",{staticClass:"dia-con-p"},[i("h4",[e._v("是否确认删除")])]),e._v(" "),i("div",{staticClass:"dia-btn-con",staticStyle:{"text-align":"right"}},[i("div",{staticClass:"dia-btn dia-btn-cancel",on:{click:function(t){e.dialogDeleteObserve=!1}}},[e._v("取消")]),e._v(" "),i("div",{staticClass:"dia-btn dia-btn-submit",on:{click:e.deleteObserve}},[e._v("确认")])])])])],1)},staticRenderFns:[]};var c=i("VU/8")(n,o,!1,function(e){i("7zg7")},"data-v-b4dface2",null);t.default=c.exports}});