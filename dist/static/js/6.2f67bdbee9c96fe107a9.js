webpackJsonp([6],{CIyX:function(e,t){},K8Wg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("mvHQ");var o=a("bOdI"),i=a.n(o),l=(a("7+uW"),a("n5Qe")),s=a("EBA8"),r=a("TCsi"),n=a("s6tw"),c={props:{value:{twoWay:!0},items:{type:Array,default:[]},header:"来自子组件的头部消息"},methods:{onSelect:function(e){this.$emit("update:value",e)}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab-radio",attrs:{"data-toggle":"buttons"}},[e._t("label"),e._v(" "),e._l(e.items,function(t){return a("label",{key:t.value,staticClass:"btn btn-default ",class:{active:t.value===e.value,activePurple:t.value===e.value&&"超时"==t.label,activeRed:t.value===e.value&&"事件"==t.label,activeYellow:t.value===e.value&&"故障"==t.label}},[t.colorClass?a("i",{class:t.colorClass},[e._v("●")]):e._e(),e._v(" "),a("input",{attrs:{type:"radio",autocomplete:"off"},on:{click:function(a){return e.onSelect(t.value)}}}),e._v(e._s(t.label)+"\r\n    ")])})],2)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("jgj1")},null,null).exports,m=(a("mtWM"),{name:"processManagement",props:{treeData:{type:Array}},data:function(){return{dialogDelete:!1,eleId:"",isShow:!1,currentData:"",currentNode:"",menuVisible:!1,firstLevel:!1,maxexpandId:4,defaultProps:{children:"children",label:"name"},queryDepartParam:"corp",getAllDepJson:[],createDep:{name:"",parentId:""},resolve:""}},methods:{rightClick:function(e,t,a){this.currentData=a,this.currentNode=t},addChildNode:function(){var e=this;if(this.currentNode.level>=5)return this.$message.error("最多只支持五级！"),!1;var t=Math.ceil(100*Math.random());this.createDep.name="新增节点"+t,this.createDep.parentId=this.currentData.id,l.a.accountApi.createDepartments(this.createDep).then(function(t){200===t.data.code&&"success"===t.data.message&&(e.currentNode.childNodes=[],e.refreshNode(e.currentData.id))})},deleteNode:function(){var e=this;l.a.accountApi.deleteDepartment({id:this.currentData.id}).then(function(t){200===t.data.code&&"success"===t.data.message&&e.refreshNode(e.currentData.parentId)})},refreshNode:function(e){var t=this.$refs.tree.getNode(e);t.loaded=!1,t.expand()},editNode:function(){var e=this;this.currentData.isEdit||(this.$set(this.currentData,"isEdit",!0),this.$nextTick(function(){e.$refs["slotTreeInput"+e.currentData.id].$refs.input.focus()}))},NodeBlur:function(e,t){if(0===t.name.length)return this.$message.error("名称不可为空！"),!1;t.isEdit&&this.$set(t,"isEdit",!1)},loadNode1:function(e,t){this.resolve=t,this.getAllDepartmentData(e,t)},getAllDepartmentData:function(e,t){var a=this;l.a.accountApi.getDepartments(0==e.level?"corp":e.data.id).then(function(e){200===e.data.code&&"success"===e.data.message?(a.getAllDepJson=e.data.data||[],t(a.getAllDepJson)):a.getAllDepJson=[]}).catch(function(e){})}},mounted:function(){this.getAllDepartmentData()}}),p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lalala"},[a("el-tree",{ref:"tree",attrs:{"expand-on-click-node":!1,"node-key":"id",load:e.loadNode1,props:e.defaultProps,lazy:""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,i=t.data;return a("span",{staticClass:"slot-t-node"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!i.isEdit,expression:"!data.isEdit"}]},[a("span",{class:[i.id>=99?"slot-t-node--label":""]},[e._v(e._s(o.label))]),e._v(" "),a("span",{staticClass:"operatioDropdownSpan"},[a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"operationBtn",on:{click:function(t){return e.rightClick(t,o,i)}}},[e._v("...")]),e._v(" "),a("el-dropdown-menu",{staticClass:"operatioDropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"edit",on:{click:function(t){return e.editNode()}}},[e._v("编辑")])]),e._v(" "),a("el-dropdown-item",[a("div",{staticClass:"delete",on:{click:function(t){e.deleteDialog=!0,e.alert(1)}}},[e._v("删除")])]),e._v(" "),a("el-dropdown-item",[a("div",{staticClass:"add",on:{click:function(t){return e.addChildNode()}}},[e._v("添加下级")])])],1)],1)],1)]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:i.isEdit,expression:"data.isEdit"}]},[a("el-input",{ref:"slotTreeInput"+i.id,staticClass:"slot-t-input",attrs:{size:"mini",autofocus:""},on:{blur:function(t){return t.stopPropagation(),e.NodeBlur(o,i)}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.NodeBlur(o,i)}},model:{value:i.name,callback:function(t){e.$set(i,"name",t)},expression:"data.name"}}),e._v(" "),a("span",[e._v("保存")]),e._v(" "),a("span",[e._v("取消")])],1)])}}])}),e._v(" "),a("el-dialog",{attrs:{width:"500px","show-close":!1,title:"删除账号",visible:e.deleteDialog},on:{"update:visible":function(t){e.deleteDialog=t}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),e._v(" "),a("div",{staticClass:"dia-con-p"},[a("div",{staticClass:"confirDialogText1"},[e._v("删除组织将同时删除组织内账号，是否确认删除？")])])])]),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.deleteDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.deleteNode()}}},[e._v("确 认")])],1)])],1)},staticRenderFns:[]};var f=a("VU/8")(m,p,!1,function(e){a("fM6q")},"data-v-60332f79",null).exports,v={data:function(){var e;return e={addlevel:{name:"",parentId:""},addNextLevel_dialog:!1,addNextLevel_rule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},addRole_dialog:!1,tabPeriods:[{label:"组织/账号",value:0},{label:"角色",value:1}],tabPeriod:0,rolesJson:[],edit_roleNameArr:[],formLabelWidth:"86px",add_dialogFormVisible:!1,addAccountForm:{name:"",username:"",password:"",roleId:"",departmentId:""},edit_dialogFormVisible:!1,EditAccountForm:{name:"",roleId:"222",departmentId:0},query:"",searchKey:"",queryTypeOptions:[{label:"MAC",value:"mac"},{label:"设备ID",value:"id"}],queryType:{label:"MAC",value:"mac"},act_index:"0",totalPageSize:0,totalPage:0,queryParam:{departmentId:"",limit:10,offset:0,search:""},getAllAccountJson:[],roleQueryParam:{limit:100,offset:1,search:""},periods:[{label:"全部",value:""}],period:"",periods1:[{label:"全部",value:""},{label:"正常",value:"1"},{label:"异常",value:"0"}],period1:"",bindRoleForm:{userId:"",roleId:""},adType:"",addAccountRules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:11,max:11,message:"登录账号错误，请输入11位手机号",trigger:"blur"},{required:!0,pattern:/(^((1[3-9][0-9])\d{8}$))/,message:"请输入正确的手机号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:20,message:"名称字符长度过长，请控制在20位字符以内",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},editAccountRules:{name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},resetPasswordDialogVisoble:!1,confirmReset:{},deleteDialogVisoble:!1,confirmDelete:{},getAllDepJson:[],value1:"",multipleSelection:[],dialogDelete:!1,activeRole:0,deleteDepDialog:!1,eleId:"",isShow:!1,currentData:"",currentNode:"",menuVisible:!1,firstLevel:!1,maxexpandId:4,defaultProps:{children:"children",label:"name"},queryDepartParam:"corp"},i()(e,"getAllDepJson",[]),i()(e,"resolve",""),i()(e,"getCorModuleList",[]),i()(e,"addRoleForm",{name:"",description:"",ids:[]}),i()(e,"addRoleFormRule",{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}),i()(e,"checkRole",{}),i()(e,"getRoleModuleList",[]),i()(e,"dialogRoleDelete",!1),i()(e,"editRole_dialog",!1),i()(e,"editRoleForm",{name:"",description:"",ids:[]}),i()(e,"editRoleFormRule",{name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:20,message:"名称字符长度过长，请控制在20位字符以内",trigger:"blur"}]}),i()(e,"count",1),i()(e,"clickName",""),i()(e,"checkDepName1",""),i()(e,"corpId",""),e},components:{"radio-group":s.a,"search-input":r.a,fotter:n.a,"tab-radio":u,Tree:f},watch:{tabPeriod:function(e){},period:function(e){this.queryParam.roleId=e,this.getAllAccountData()},period1:function(e){this.queryParam.status=e,this.getAllAccountData()}},mounted:function(){this.getAllAccountData(),this.getAllRoleData()},methods:{addNextLevelFuc:function(){var e=this;if(this.currentNode.level>=5)return this.$message.error("最多只支持五级！"),!1;this.addlevel.parentId=this.currentData.id,l.a.accountApi.createDepartments(this.addlevel).then(function(t){200===t.data.code&&"success"===t.data.message?(e.addNextLevel_dialog=!1,e.currentNode.childNodes=[],e.refreshNode(e.currentData.id),e.$message.success("添加成功")):e.$message.error(t.data.message)})},addChildNode:function(){var e=this;this.addNextLevel_dialog=!0,this.$nextTick(function(){e.$refs.addlevelRef.resetFields()})},numberCheck:function(){this.addAccountForm.username=this.addAccountForm.username.replace(/[^\.\d]/g,"")},numberCheck2:function(){this.EditAccountForm.username=this.EditAccountForm.username.replace(/[^\.\d]/g,"")},handleAddtclick:function(e,t){this.EditAccountForm.departmentId=e.id,this.checkDepName1=e.name},accountBlur:function(){11==this.addAccountForm.username.length&&(this.addAccountForm.password=this.addAccountForm.username.substring(5,11))},confirmEditRole:function(){},deleteRole:function(){var e=this;l.a.accountApi.deleteRole({id:this.activeM}).then(function(t){200===t.data.code?(e.$message.success("删除角色成功"),e.getAllRoleData(),e.dialogRoleDelete=!1):e.$message.error(t.data.message)})},openEditRoleDialog:function(){var e=this;this.editRole_dialog=!0,this.editRoleForm.name=this.checkRole.name,this.editRoleForm.description=this.checkRole.description,this.editRoleForm.ids=[],this.getRoleModuleList.forEach(function(t){e.editRoleForm.ids.push(t.id)})},getRoleMo:function(e){var t=this;this.getRoleModuleList=[],l.a.accountApi.roleGetmodule(e).then(function(e){200===e.data.code?t.getRoleModuleList=e.data.data||[]:t.$message.error(e.data.message)}).catch(function(e){})},clickRole:function(e){this.activeM=e.id,this.dialogRoleName=e.name,this.checkRole=e,this.getRoleMo(this.activeM)},getCorpMo:function(){var e=this;this.getCorModuleList=[],l.a.accountApi.getCorModules().then(function(t){200===t.data.code?e.getCorModuleList=t.data.data||[]:e.$message.error(t.data.message)}).catch(function(e){})},addRoleDialog:function(){var e=this;this.addRole_dialog=!0,this.$nextTick(function(){e.$refs.addRoleForm.resetFields(),e.getCorpMo()})},confirmAddRole:function(){var e=this;this.$refs.addRoleForm.validate(function(t){t&&l.a.accountApi.createRole(e.addRoleForm).then(function(t){e.adding=!1,200===t.data.code?(e.$message.success("创建成功！"),e.getAllRoleData(),e.addRole_dialog=!1):e.$message.error(t.data.message)})})},handleLeftclick:function(e,t){this.queryParam.departmentId=1==t.level?"":e.id,this.addAccountForm.departmentId=1==t.level?this.corpId:e.id,this.clickName=e.name,this.getAllAccountData()},rightClick:function(e,t,a){this.currentData=a,this.currentNode=t},deleteNode:function(){var e=this;l.a.accountApi.deleteDepartment({id:this.currentData.id}).then(function(t){200===t.data.code&&"success"===t.data.message?(e.refreshNode(e.currentData.parentId),e.deleteDepDialog=!1,e.$message.success("删除组织成功")):(e.deleteDepDialog=!1,e.$message.error(t.data.message))})},refreshNode:function(e){var t=this.$refs.tree.getNode(e);t.loaded=!1,t.expand()},editNode:function(){var e=this;this.currentData.isEdit||(this.$set(this.currentData,"isEdit",!0),this.$nextTick(function(){e.$refs["slotTreeInput"+e.currentData.id].$refs.input.focus()}))},NodeBlur:function(e,t){var a=this;return this.clickName==t.name?(this.$set(t,"isEdit",!1),!1):0===t.name.length?(this.$message.error("名称不可为空！"),!1):void(t.isEdit&&l.a.accountApi.editDepartment({id:this.currentData.id,name:t.name}).then(function(e){200===e.data.code&&"success"===e.data.message?a.$message.success("编辑成功"):(a.currentData.name=a.clickName,a.$message.error(e.data.message)),a.$set(t,"isEdit",!1)}))},loadNode1:function(e,t){this.resolve=t,this.getAllDepartmentData(e,t)},getAllDepartmentData:function(e,t){var a=this;l.a.accountApi.getDepartments(e.level&&0!==e.level?e.data.id:"corp").then(function(o){200===o.data.code&&"success"===o.data.message?(a.getAllDepJson=o.data.data||[],e.level&&0!==e.level||(a.corpId=o.data.data[0].id||"",a.addAccountForm.departmentId=a.corpId),t(a.getAllDepJson)):(a.getAllDepJson=[],a.$message.error(o.data.message))}).catch(function(e){})},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 0===t.isValid?"gray-row":""},deleteStaffDialog:function(){var e=this;if(0===this.multipleSelection.length)return this.$message.error("请勾选需要删除的账号。账号删除后无法复原，请谨慎操作");this.multipleSelection.forEach(function(t){e.getAllAccountJson.filter(function(e){return e.id==t})}),this.dialogDelete=!0},deleteStaff:function(){var e=this;l.a.accountApi.deleteAccount({ids:this.multipleSelection}).then(function(t){200===t.data.code?(e.getAllAccountData(),e.dialogDelete=!1,"success"==t.data.message?e.$message.success("删除成功！"):e.$message.error(t.data.message)):(e.getAllAccountData(),e.$message.error(t.data.message))}).catch(function(t){e.$message.error(t.data.message)})},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e,a){t.multipleSelection.push(e.id)})},depSelectChange:function(){""!==this.queryParam.depId&&(this.searchKey=this.queryParam.staffName=this.queryParam.phone=""),this.queryParam.offset=0,this.getAllAccountData()},getAllAccountData:function(){var e=this;l.a.accountApi.getAccounts(this.queryParam).then(function(t){200===t.data.code&&"success"===t.data.message?(e.getAllAccountJson=t.data.data.records,e.totalPageSize=t.data.data.total):(e.getAllAccountJson=[],e.$message.error(t.data.message))}).catch(function(e){})},openResetPasswordDialog:function(e){this.edit_dialogFormVisible=!1,this.resetPasswordDialogVisoble=!0,this.confirmReset=e},cancelResetPassword:function(){this.resetPasswordDialogVisoble=!1,this.confirmReset={}},resetPassword:function(){var e=this;l.a.accountApi.resetAccount({id:this.EditAccountForm.id}).then(function(t){200===t.data.code?(e.getAllAccountData(),e.resetPasswordDialogVisoble=!1,e.$message.success("重置密码成功")):e.$message.error("账号操作权限不足")}).catch(function(t){e.$message.error(t.data.message)})},editDialogClose:function(){this.$refs.editForm.clearValidate(),this.$refs.editForm.resetFields()},editAccount:function(e,t){var a=this;l.a.accountApi.getAccountDetailA({id:t.id}).then(function(e){200==e.data.code&&(a.EditAccountForm=e.data.data,a.EditAccountForm.roleId=parseInt(a.EditAccountForm.roleId),a.checkDepName1=e.data.data.departmentName||"",a.edit_dialogFormVisible=!0)})},confirmEdit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&l.a.accountApi.editManager(e.EditAccountForm).then(function(t){200==t.data.code?(e.$message.success(t.data.message),e.getAllAccountData(),e.edit_dialogFormVisible=!1):"无权"==t.data.message?e.$message.error("账号操作权限不足"):e.$message.error(t.data.message)}).catch(function(e){})})},openDeleteDialog:function(e){this.deleteDialogVisoble=!0,this.confirmDelete=e},cancelDelete:function(){this.deleteDialogVisoble=!1,this.confirmDelete={}},deleteAccount:function(e){var t=this;l.a.accountApi.deleteAccount({uid:e.id}).then(function(e){200===e.data.code?(t.$message.success("删除成功！"),t.getAllAccountData(),t.deleteDialogVisoble=!1):"无权"==e.data.message?t.$message.error("账号操作权限不足"):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.data.message)})},changeStatus:function(e,t,a){var o=this;l.a.accountApi.enableAccount({id:a.id,valid:e}).then(function(e){200==e.data.code?o.$message.success("修改账号状态成功！"):"无权"==e.data.message?o.$message.error("账号操作权限不足"):o.$message.error(e.data.message),o.getAllAccountData()}).catch(function(e){})},handleSizeChange:function(e){this.queryParam.limit=e,this.getAllAccountData()},handleCurrentChange:function(e){this.queryParam.offset=e,this.getAllAccountData()},getAllRoleData:function(){var e=this;l.a.accountApi.getRoles(this.roleQueryParam).then(function(t){200===t.data.code&&(e.rolesJson=t.data.data.records,e.totalPage=t.data.data.total,e.clickRole(e.rolesJson[0]))}).catch(function(e){})},currentPageChange:function(e){this.roleQueryParam.offset=e,this.getAllRoleData()},pageSizeChange:function(e){this.roleQueryParam.limit=e,this.getAllRoleData()},addAccountDialog:function(){var e=this;this.add_dialogFormVisible=!0,this.$nextTick(function(){e.$refs.addForm.resetFields()})},confirmAddAccount:function(){var e=this;this.$refs.addForm.validate(function(t){t&&l.a.accountApi.createAccount(e.addAccountForm).then(function(t){e.adding=!1,200===t.data.code?(e.$message.success("创建成功！"),e.getAllAccountData(),e.add_dialogFormVisible=!1):e.$message.error(t.data.message)})})},searchAccount:function(){this.queryParam.offset=1,this.queryParam.search=this.searchKey,this.getAllAccountData()}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrap",attrs:{id:"account"}},[a("div",{staticClass:"pageTitle"},[e._v("账号管理")]),e._v(" "),a("div",{staticClass:"wrapper",style:{"min-height":1==e.tabPeriod?"805px":""}},[a("div",{staticClass:" ",staticStyle:{position:"absolute"}},[a("div",{staticClass:"panel panelLeft",style:{height:1==e.tabPeriod?"756px":""}},[a("tab-radio",{staticStyle:{padding:"33px 0 32px 32px","border-bottom":"1px solid #d8dddf",width:"100%"},attrs:{items:e.tabPeriods,value:e.tabPeriod},on:{"update:value":function(t){e.tabPeriod=t}}}),e._v(" "),1==e.tabPeriod?a("ul",{staticClass:"roleList"},e._l(e.rolesJson,function(t){return a("li",{key:t.id,class:{active:t.id==e.activeM},on:{click:function(a){return e.clickRole(t)}}},[e._v("\r\n            "+e._s(t.name)+"\r\n          ")])}),0):e._e(),e._v(" "),1==e.tabPeriod?a("button",{staticClass:"btn blueBtn",class:{fixAddroleBtn:e.rolesJson.length>8},staticStyle:{margin:"37px 0 0 65px","border-radius":"10px",width:"160px"},on:{click:e.addRoleDialog}},[e._v("添加角色")]):e._e(),e._v(" "),0==e.tabPeriod?a("el-tree",{ref:"tree",attrs:{"expand-on-click-node":!1,"node-key":"id",load:e.loadNode1,props:e.defaultProps,lazy:"","check-on-click-node":!0,"highlight-current":""},on:{"node-click":e.handleLeftclick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,i=t.data;return a("span",{staticClass:"slot-t-node",class:[i.id==e.queryParam.departmentId?"slot-t-node--label":""]},[a("span",{directives:[{name:"show",rawName:"v-show",value:!i.isEdit,expression:"!data.isEdit"}]},[a("span",[e._v(e._s(o.label))]),e._v(" "),a("span",{staticClass:"operatioDropdownSpan"},[a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"operationBtn",on:{click:function(t){return e.rightClick(t,o,i)}}},[e._v("...")]),e._v(" "),a("el-dropdown-menu",{staticClass:"operatioDropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"edit",on:{click:function(t){return e.editNode()}}},[e._v("编辑")])]),e._v(" "),o.level>1?a("el-dropdown-item",[a("div",{staticClass:"delete",on:{click:function(t){e.deleteDepDialog=!0}}},[e._v("删除")])]):a("el-dropdown-item",[a("div",{staticClass:"delete",staticStyle:{color:"#ccc!important",cursor:"not-allowed"}},[e._v("删除")])]),e._v(" "),a("el-dropdown-item",[a("div",{staticClass:"add",on:{click:function(t){return e.addChildNode()}}},[e._v("添加下级")])])],1)],1)],1)]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:i.isEdit,expression:"data.isEdit"}]},[a("el-input",{ref:"slotTreeInput"+i.id,staticClass:"slot-t-input",attrs:{size:"mini",autofocus:""},on:{blur:function(t){return t.stopPropagation(),e.NodeBlur(o,i)}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.NodeBlur(o,i)}},model:{value:i.name,callback:function(t){e.$set(i,"name",t)},expression:"data.name"}})],1)])}}],null,!1,2123072386)}):e._e()],1)]),e._v(" "),0==e.tabPeriod?a("div",{staticClass:"panelRight"},[a("div",{staticClass:"row"},[a("div",{staticClass:"panel topSelect"},[a("div",{staticClass:"subSelect"},[a("search-input",{attrs:{placeholderValue:"搜索账号/姓名"},on:{search:function(t){return e.searchAccount()},cancel:function(t){return e.searchAccount()}},model:{value:e.searchKey,callback:function(t){e.searchKey="string"==typeof t?t.trim():t},expression:"searchKey"}})],1),e._v(" "),a("div",{staticClass:"subBtns"},[a("button",{staticClass:"btn blueBtn",on:{click:e.addAccountDialog}},[e._v("添加账号")]),e._v(" "),a("button",{staticClass:"btn whiteBtn fr deleteStaff",on:{click:function(t){return e.deleteStaffDialog()}}},[e._v("删除账号")])])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"panel scdPanel",staticStyle:{"min-height":"791px"}},[a("div",{staticStyle:{position:"relative",display:"flex"}},[e._v("\r\n             \r\n            "),a("el-table",{attrs:{data:e.getAllAccountJson,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"角色","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.roleName?a("span",{domProps:{innerHTML:e._s(t.row.roleName)}}):e._e()]}}],null,!1,307414716)}),e._v(" "),a("el-table-column",{attrs:{label:"创建人","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                  "+e._s(t.row.createUser?t.row.createUser:"系统创建")+"\r\n                ")]}}],null,!1,3028542749)}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                  "+e._s(t.row.createTime?t.row.createTime.substring(0,10):"--")+"\r\n                ")]}}],null,!1,256112315)}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#E2E6E8","inactive-color":"#E3E7E9","active-value":1,"inactive-value":0,width:28},on:{change:function(a){return e.changeStatus(a,t.$index,t.row)}},model:{value:t.row.isValid,callback:function(a){e.$set(t.row,"isValid",a)},expression:"scope.row.isValid"}})]}}],null,!1,2027659334)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),e.editAccount(t.$index,t.row)}}},[e._v("编辑\r\n                  ")])]}}],null,!1,884165629)})],1),e._v("\r\n             \r\n          ")],1),e._v(" "),a("div",{staticClass:"pagination_block"},[a("el-pagination",{attrs:{"current-page":e.queryParam.offset,"page-sizes":[10,20,30],"page-size":e.queryParam.limit,layout:"prev, pager, next, sizes, jumper",total:e.totalPageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.queryParam,"offset",t)},"update:current-page":function(t){return e.$set(e.queryParam,"offset",t)}}})],1)])])]):e._e(),e._v(" "),1==e.tabPeriod?a("div",{staticClass:"panelRight rolePnael"},[a("div",{staticClass:"row"},[a("div",{staticClass:"panel "},[a("div",{staticClass:"bigTitle"},[e._v("基本信息\r\n            "),a("span",{staticClass:"iconSpan deleteIcon",on:{click:function(t){e.dialogRoleDelete=!0}}})]),e._v(" "),a("div",{staticClass:"role_content"},[a("div",{staticClass:"role_p"},[a("div",{staticClass:"role_title"},[e._v("角色名称")]),e._v(" "),a("div",[e._v(e._s(e.checkRole.name))])]),e._v(" "),a("div",{staticClass:"role_p"},[a("div",{staticClass:"role_title"},[e._v("角色描述")]),e._v(" "),a("div",[e._v(e._s(e.checkRole.description))])])])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"panel "},[a("div",{staticClass:"bigTitle"},[e._v("功能权限")]),e._v(" "),a("div",{staticClass:"role_content"},[e.getRoleModuleList.length>0?a("el-row",{attrs:{gutter:78}},e._l(e.getRoleModuleList,function(t,o){return a("el-col",{key:o,attrs:{span:6}},[a("span",{staticClass:"checkMoudel"},[e._v(e._s(t.name))])])}),1):a("div",{staticStyle:{"padding-bottom":"40px","font-size":"16px",color:"#999"}},[e._v("暂未绑定功能模块")])],1)])])]):e._e()]),e._v(" "),a("el-dialog",{attrs:{width:"500px",title:"添加账号",visible:e.add_dialogFormVisible},on:{"update:visible":function(t){e.add_dialogFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addAccountForm,"label-width":e.formLabelWidth,rules:e.addAccountRules,"label-position":"top"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称","auto-complete":"off",clearable:"",size:"small"},model:{value:e.addAccountForm.name,callback:function(t){e.$set(e.addAccountForm,"name",t)},expression:"addAccountForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入11位手机号","auto-complete":"off",clearable:"",size:"small",maxlength:"11"},on:{blur:function(t){return e.accountBlur()}},nativeOn:{keyup:function(t){return e.numberCheck(t)}},model:{value:e.addAccountForm.username,callback:function(t){e.$set(e.addAccountForm,"username",t)},expression:"addAccountForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初始密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入数字和字母组合6位以上的密码","auto-complete":"off",clearable:"",size:"small"},model:{value:e.addAccountForm.password,callback:function(t){e.$set(e.addAccountForm,"password",t)},expression:"addAccountForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号角色",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"请选择账号角色",size:"small"},model:{value:e.addAccountForm.roleId,callback:function(t){e.$set(e.addAccountForm,"roleId",t)},expression:"addAccountForm.roleId"}},e._l(e.rolesJson,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.add_dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.confirmAddAccount()}}},[e._v("确 认")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"500px",title:"编辑账号",visible:e.edit_dialogFormVisible,"custom-class":"addAccount"},on:{"update:visible":function(t){e.edit_dialogFormVisible=t},closed:e.editDialogClose}},[a("el-form",{ref:"editForm",attrs:{model:e.EditAccountForm,"label-width":e.formLabelWidth,rules:e.editAccountRules,"label-position":"top"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称","auto-complete":"off",clearable:"",size:"small"},model:{value:e.EditAccountForm.name,callback:function(t){e.$set(e.EditAccountForm,"name",t)},expression:"EditAccountForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入登录账号，即手机号","auto-complete":"off",clearable:"",size:"small",maxlength:"11"},nativeOn:{keyup:function(t){return e.numberCheck2(t)}},model:{value:e.EditAccountForm.username,callback:function(t){e.$set(e.EditAccountForm,"username",t)},expression:"EditAccountForm.username"}})],1),e._v(" "),"administrator"!=e.adType?a("el-form-item",{attrs:{label:"账号角色",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"请选择角色",size:"small"},model:{value:e.EditAccountForm.roleId,callback:function(t){e.$set(e.EditAccountForm,"roleId",t)},expression:"EditAccountForm.roleId"}},e._l(e.rolesJson,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),e._v(" "),"administrator"!=e.adType?a("el-form-item",{attrs:{label:"所属组织",prop:"departmentId"}},[a("el-dropdown",{staticClass:"treeDep",attrs:{"hide-on-click":!1,trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[""!==e.EditAccountForm.departmentId?a("span",[e._v(e._s(e.checkDepName1))]):a("span",{staticStyle:{color:"#C2C7CC"}},[e._v("请选择所属组织")]),e._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{staticClass:"depTreeDropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-tree",{ref:"treeDrop",attrs:{"expand-on-click-node":!0,"node-key":"id",load:e.loadNode1,props:e.defaultProps,lazy:"","check-on-click-node":!0,"highlight-current":""},on:{"node-click":e.handleAddtclick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node;return t.data,a("span",{staticClass:"slot-t-node"},[a("span",[a("span",[e._v(e._s(o.label))])])])}}],null,!1,1879628974)})],1)],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"tal"},[a("span",{staticClass:"dialogCancel",staticStyle:{position:"absolute",left:"32px",bottom:"40px"},on:{click:function(t){return e.openResetPasswordDialog(e.EditAccountForm)}}},[e._v("重置密码")])]),e._v(" "),a("span",{staticClass:"tar"},[a("span",{staticClass:"dialogCancel ",on:{click:function(t){e.edit_dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure ",attrs:{type:"primary"},on:{click:e.confirmEdit}},[e._v("确 认")])],1)])],1),e._v(" "),a("el-dialog",{attrs:{width:"500px",title:"重置密码","show-close":!1,visible:e.resetPasswordDialogVisoble},on:{"update:visible":function(t){e.resetPasswordDialogVisoble=t}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),e._v(" "),a("div",{staticClass:"dia-con-p"},[a("div",{staticClass:"confirDialogText1"},[e._v("重置后密码默认为手机号后6位，是否确认重置？")])])])]),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){return e.cancelResetPassword()}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.resetPassword()}}},[e._v("确 认")])],1)]),e._v(" "),a("el-dialog",{attrs:{width:"500px","show-close":!1,title:"删除账号",visible:e.dialogDelete},on:{"update:visible":function(t){e.dialogDelete=t}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),e._v(" "),a("div",{staticClass:"dia-con-p"},[a("div",{staticClass:"confirDialogText1"},[e._v("是否确认删除所选账号")]),e._v(" "),a("div",{staticClass:"confirDialogText2"},[e._v("删除后不可复原，请谨慎操作")])])])]),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.dialogDelete=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.deleteStaff()}}},[e._v("确 认")])],1)]),e._v(" "),a("el-dialog",{attrs:{width:"510px","show-close":!1,title:"删除组织",visible:e.deleteDepDialog},on:{"update:visible":function(t){e.deleteDepDialog=t}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),e._v(" "),a("div",{staticClass:"dia-con-p"},[a("div",{staticClass:"confirDialogText1"},[e._v("删除组织将同时删除组织内账号，是否确认删除？")])])])]),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.deleteDepDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.deleteNode()}}},[e._v("确 认")])],1)]),e._v(" "),a("fotter"),e._v(" "),a("el-dialog",{attrs:{width:"500px","show-close":!1,title:"删除角色",visible:e.dialogRoleDelete},on:{"update:visible":function(t){e.dialogRoleDelete=t}}},[a("div",{staticClass:"dialog-delete"},[a("div",{staticClass:"dia-heading"},[a("div",{staticClass:"dia-con-pic"}),e._v(" "),a("div",{staticClass:"dia-con-p"},[a("div",{staticClass:"confirDialogText1"},[e._v("是否确认删除所选角色")]),e._v(" "),a("div",{staticClass:"confirDialogText2"},[e._v("删除后不可复原，请谨慎操作")])])])]),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.dialogRoleDelete=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.deleteRole()}}},[e._v("确 认")])],1)]),e._v(" "),a("el-dialog",{attrs:{width:"500px",title:"添加角色",visible:e.addRole_dialog},on:{"update:visible":function(t){e.addRole_dialog=t}}},[a("el-form",{ref:"addRoleForm",attrs:{model:e.addRoleForm,"label-width":e.formLabelWidth,rules:e.addRoleFormRule,"label-position":"top"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入角色名称","auto-complete":"off",clearable:"",size:"small"},model:{value:e.addRoleForm.name,callback:function(t){e.$set(e.addRoleForm,"name",t)},expression:"addRoleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[a("el-input",{attrs:{placeholder:"请填写角色描述","auto-complete":"off",clearable:"",size:"small"},model:{value:e.addRoleForm.description,callback:function(t){e.$set(e.addRoleForm,"description",t)},expression:"addRoleForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"功能权限",prop:"ids"}},[e.getCorModuleList.length>0?a("el-checkbox-group",{model:{value:e.addRoleForm.ids,callback:function(t){e.$set(e.addRoleForm,"ids",t)},expression:"addRoleForm.ids"}},e._l(e.getCorModuleList,function(t,o){return a("el-col",{key:o,attrs:{span:6}},[a("el-checkbox",{attrs:{label:t.id}},[e._v(e._s(t.name))])],1)}),1):a("div",[e._v("暂无功能模块")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.addRole_dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.confirmAddRole()}}},[e._v("确 认")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"500px",title:"编辑角色",visible:e.editRole_dialog},on:{"update:visible":function(t){e.editRole_dialog=t}}},[a("el-form",{ref:"editRoleFormRule",attrs:{model:e.editRoleForm,"label-width":e.formLabelWidth,rules:e.editRoleFormRule,"label-position":"top"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入角色名称","auto-complete":"off",clearable:"",size:"small",maxlength:"11"},model:{value:e.editRoleForm.name,callback:function(t){e.$set(e.editRoleForm,"name",t)},expression:"editRoleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[a("el-input",{attrs:{placeholder:"请填写角色描述","auto-complete":"off",clearable:"",size:"small",maxlength:"11"},model:{value:e.editRoleForm.description,callback:function(t){e.$set(e.editRoleForm,"description",t)},expression:"editRoleForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"功能权限",prop:"ids"}},[a("el-checkbox-group",{model:{value:e.editRoleForm.ids,callback:function(t){e.$set(e.editRoleForm,"ids",t)},expression:"editRoleForm.ids"}},e._l(e.getCorModuleList,function(t,o){return a("el-col",{key:o,attrs:{span:6}},[a("el-checkbox",{attrs:{label:t.id}},[e._v(e._s(t.name))])],1)}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.editRole_dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.confirmEditRole()}}},[e._v("确 认")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"500px",title:"添加下级",visible:e.addNextLevel_dialog},on:{"update:visible":function(t){e.addNextLevel_dialog=t}}},[a("el-form",{ref:"addlevelRef",attrs:{model:e.addlevel,"label-width":e.formLabelWidth,rules:e.addNextLevel_rule,"label-position":"top"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称","auto-complete":"off",clearable:"",size:"small"},model:{value:e.addlevel.name,callback:function(t){e.$set(e.addlevel,"name",t)},expression:"addlevel.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer tar",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"dialogCancel",on:{click:function(t){e.addNextLevel_dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"dialogSure",attrs:{type:"primary"},on:{click:function(t){return e.addNextLevelFuc()}}},[e._v("确 认")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(v,g,!1,function(e){a("CIyX")},null,null);t.default=h.exports},fM6q:function(e,t){},jgj1:function(e,t){}});