webpackJsonp([10],{"6a3+":function(e,t){},FTgb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),n=a("n5Qe"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("span",[this._t("radio_original"),this._v(" "),t("i",{staticClass:"radio_inner"})],2)},staticRenderFns:[]};var r={name:"LoginForm",components:{"radio-moni-radio":a("VU/8")({methods:{dismiss:function(){}}},s,!1,function(e){a("J/v2")},null,null).exports},computed:{},data:function(){return{loginForm:{username:"",password:""},isLoginSuccess:!1,rememberPwd:Boolean(this.getCookie("rememberPwd"))||!1,warningTip:"",sms:"",sendAuthCode:!0,auth_time:0}},watch:{},mounted:function(){this.rememberPwd&&(this.loginForm.username=window.atob(this.getCookie("username")),this.loginForm.password=window.atob(this.getCookie("password")))},methods:{getSms:function(){var e=this;n.a.log.getSms({phone:this.loginForm.account}).then(function(t){if(200===t.data.code){e.warningTip="",e.sendAuthCode=!1,e.auth_time=60;var a=setInterval(function(){e.auth_time--,e.auth_time<=0&&(e.sendAuthCode=!0,clearInterval(a))},1e3)}else e.$message.error(t.data.message)})},onSubmit:function(){var e=this;n.a.log.login(this.loginForm).then(function(t){if(200===t.data.code){window.localStorage.setItem("accessToken",t.data.data.token),window.localStorage.setItem("refreshToken",t.data.data.refreshToken),t.data.data.facility&&window.localStorage.setItem("facility",t.data.data.facility),t.data.data.part&&window.localStorage.setItem("partPoint",t.data.data.part),t.data.data.func&&window.localStorage.setItem("func",o()(t.data.data.func)),window.localStorage.setItem("roleType",t.data.data.admin?"admin":"");for(var a=t.data.data.func||[],i=!1,n=0;n<a.length;n++)-1!==a[n].indexOf("数字防疫点")&&(i=!0);t.data.data.admin||i?e.$router.push("/digital-list"):e.$router.push("/center"),e.$message.success("登录成功！"),e.rememberPwd?(e.setCookie("rememberPwd",!0),e.setCookie("username",window.btoa(e.loginForm.username)),e.setCookie("password",window.btoa(e.loginForm.password))):(e.delCookie("rememberPwd"),e.delCookie("username"),e.delCookie("password"))}else e.$message.error(t.data.message)}).catch(function(e){})},getUserPerm:function(e){var t=this;n.a.log.getUser_pers(e).then(function(e){e.data.success&&(window.localStorage.setItem("_role_",o()(e.data.result)),t.$router.push("/admin"))}).catch(function(e){})},setCookie:function(e,t){var a=new Date;a.setTime(a.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()},getCookie:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),a=document.cookie.match(t)||{};return a.length?unescape(a[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var a=this.getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login"}},[a("div",{staticClass:"makeLoginCenter"},[e._m(0),e._v(" "),a("div",{staticClass:"loginFormWrap"},[a("div",{staticClass:"box"},[a("form",{staticClass:"loginForm",attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",[""!==e.warningTip?a("div",{staticClass:"loginInput warningTip tal"},[e._v(e._s(e.warningTip))]):e._e(),e._v(" "),a("div",{staticClass:"inputWrap"},[a("div",{staticClass:"inputLabel"},[e._v("账户名")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.username,expression:"loginForm.username"}],staticClass:"loginInput",attrs:{placeholder:"请输入登录账号",name:"Name",type:"text"},domProps:{value:e.loginForm.username},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"username",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"inputWrap"},[a("div",{staticClass:"inputLabel inputLabelPsd"},[e._v("密码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],staticClass:"loginInput",attrs:{placeholder:"请输入密码",name:"Password",type:"password"},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"wthreeText"},[a("ul",[a("li",{staticStyle:{float:"right"}},[a("label",[a("radio-moni-radio",{staticClass:"radio_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.rememberPwd,expression:"rememberPwd"}],attrs:{slot:"radio_original",type:"checkbox"},domProps:{checked:Array.isArray(e.rememberPwd)?e._i(e.rememberPwd,null)>-1:e.rememberPwd},on:{change:function(t){var a=e.rememberPwd,i=t.target,o=!!i.checked;if(Array.isArray(a)){var n=e._i(a,null);i.checked?n<0&&(e.rememberPwd=a.concat([null])):n>-1&&(e.rememberPwd=a.slice(0,n).concat(a.slice(n+1)))}else e.rememberPwd=o}},slot:"radio_original"})]),e._v("\r\n                  记住我\r\n                ")],1)])])]),e._v(" "),a("input",{staticClass:"loginBtn",attrs:{type:"submit",value:"登录"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}}})])])])]),e._v(" "),a("span",{staticClass:"loginBrand"})])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("div",{staticClass:"title1"},[this._v("欢迎使用")]),this._v(" "),t("div",{staticClass:"title2"},[this._v("EWTES疫情预警及溯源系统")])])}]};var d=a("VU/8")(r,l,!1,function(e){a("6a3+")},null,null);t.default=d.exports},"J/v2":function(e,t){}});